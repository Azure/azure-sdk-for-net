version: 1.0.{build}
image: Visual Studio 2017
environment:
  nodejs_version: "7"
  matrix:
  - TEST_PROJECT: arm-analysisservices
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-analysisservices
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-authorization
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-authorization
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-automation
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-automation
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-batch
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-batch
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-billing
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-billing
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-cdn
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-cdn
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-cognitiveservices
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-cognitiveservices
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-compute
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-compute
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-consumption
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-consumption
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-containerregistry
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-containerregistry
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-customer-insights
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-customer-insights
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-datalake-analytics
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-datalake-analytics
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-datalake-store
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-datalake-store
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-devtestlabs
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-devtestlabs
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-dns
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-dns
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-eventhub
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-eventhub
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-graphrbac
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-graphrbac
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-insights
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-insights
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-iothub
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-iothub
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-keyvault
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-keyvault
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-logic
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-logic
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-machinelearning*
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-machinelearning*
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-mediaservices
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-mediaservices
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-monitor
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-monitor
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-network
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-network
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-notificationhubs
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-notificationhubs
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-operationalinsights
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-operationalinsights
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-powerbiembedded
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-powerbiembedded
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-recoveryservices
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-recoveryservices
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-recoveryservicesbackup
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-recoveryservicesbackup
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-redis
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-redis
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-relay
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-relay
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-resources
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-resources
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-scheduler
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-scheduler
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-search
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-search
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-servermanagement
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-servermanagement
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-servicebus
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-servicebus
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-servicefabric
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-servicefabric
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-sql
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-sql
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-storage
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-storage
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-trafficmanager
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-trafficmanager
    TEST_JSONRPC: 1
  - TEST_PROJECT: arm-web
    TEST_JSONRPC: 0
  - TEST_PROJECT: arm-web
    TEST_JSONRPC: 1
install:
- ps: Install-Product node $env:nodejs_version
- ps: npm install -g autorest
- ps: Set-Location .\tools\autogenForSwaggers\
build_script:
- ps: .\build.ps1 -project $env:TEST_PROJECT -jsonrpc $env:TEST_JSONRPC
test_script:
- ps: .\test.ps1 -project $env:TEST_PROJECT
