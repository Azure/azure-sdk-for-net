parameters:
  WorkingDirectory: '$(System.DefaultWorkingDirectory)'
steps:
  - pwsh: |
      $differByCaseFiles = git ls-files | Group-Object | Where-Object { $_.Count -gt 1 } | ForEach-Object { $_.Group} 

      if ($differByCaseFiles) 
      {
        Write-Host "Do NOT name the files which only differ in case. Please check and rename the following files:"
        $differByCaseFiles | Write-Host
        exit 1
      }
      Write-Host "There are no file names that only differ in case."
    displayName: Check file case duplicates
    workingDirectory: ${{ parameters.WorkingDirectory }}