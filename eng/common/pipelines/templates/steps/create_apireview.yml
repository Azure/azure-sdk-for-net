parameters:
- name: PackageName
  type: string
  default: ''

variables:
  apiviewuri : "https://apiviewstaging.azurewebsites.net/AutoReview/UploadAutoReview"

steps:
  - task: Powershell@2
    inputs:
      filePath: $(Build.SourcesDirectory)/eng/common/scripts/Create-APIReview.ps1
      arguments: >
        -ArtifactPath $(Pipeline.Workspace)
        -APIViewUri $(apiviewuri)
        -APIKey $(azuresdk-apiview-apikey)
        -APILabel $(Build.SourceVersion)
        -PackageName ${{ parameters.PackageName }}
      pwsh: true
      workingDirectory: $(Pipeline.Workspace)
    displayName: Create API Review ${{ parameters.PackageName }}
    continueOnError: true