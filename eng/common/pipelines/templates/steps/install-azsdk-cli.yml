parameters:
  InstallDirectory: $(Agent.TempDirectory)

steps:
  - task: Powershell@2
    displayName: 'Install Azure SDK Tools CLI'
    inputs:
      targetType: 'inline'
      script: |
        ./eng/common/mcp/azure-sdk-mcp.ps1 -InstallDirectory ${{ parameters.InstallDirectory }}
        $azsdkPath = Join-Path "${{ parameters.InstallDirectory }}" "azsdk"
        Write-Host "##vso[task.setvariable variable=AZSDK]$azsdkPath"
        Write-Host "Set AZSDK variable to: $azsdkPath"
      pwsh: true
      workingDirectory: '$(System.DefaultWorkingDirectory)'