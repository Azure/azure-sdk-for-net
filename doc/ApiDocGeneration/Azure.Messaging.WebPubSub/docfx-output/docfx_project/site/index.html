<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Azure Web PubSub service client library for .NET | Azure SDK for .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Azure Web PubSub service client library for .NET | Azure SDK for .NET ">
    <meta name="generator" content="docfx 2.43.2.0">
    
    <link rel="shortcut icon" href="./https://c.s-microsoft.com/favicon.ico?v2">
    <link rel="stylesheet" href="./styles/docfx.vendor.css">
    <link rel="stylesheet" href="./styles/docfx.css">
    <link rel="stylesheet" href="./styles/main.css">
    <meta property="docfx:navrel" content="./toc.html">
    <meta property="docfx:tocrel" content="./api/toc.html">
    
    
    <meta property="docfx:newtab" content="true">
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-62780441-41"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'UA-62780441-41');
    </script>
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="./index.html">
                <img id="logo" class="svg" src="./logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="azure-web-pubsub-service-client-library-for-net">Azure Web PubSub service client library for .NET</h1>

<p><a href="https://aka.ms/awps/doc">Azure Web PubSub Service</a> is an Azure-managed service that helps developers easily build web applications with real-time features and publish-subscribe pattern. Any scenario that requires real-time publish-subscribe messaging between server and clients or among clients can use Azure Web PubSub service. Traditional real-time features that often require polling from server or submitting HTTP requests can also use Azure Web PubSub service.</p>
<p>You can use this library in your app server side to manage the WebSocket client connections, as shown in below diagram:</p>
<p><img src="https://user-images.githubusercontent.com/668244/140014067-25a00959-04dc-47e8-ac25-6957bd0a71ce.png" alt="overflow"></p>
<p>Use this library to:</p>
<ul>
<li>Send messages to hubs and groups.</li>
<li>Send messages to particular users and connections.</li>
<li>Organize users and connections into groups.</li>
<li>Close connections</li>
<li>Grant, revoke, and check permissions for an existing connection</li>
</ul>
<p>Details about the terms used here are described in <a href="#key-concepts">Key concepts</a> section.</p>
<p><a href="https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/webpubsub/Azure.Messaging.WebPubSub/src">Source code</a> |
<a href="https://www.nuget.org/packages/Azure.Messaging.WebPubSub">Package</a> |
<a href="https://aka.ms/awps/sdk/csharp">API reference documentation</a> |
<a href="https://aka.ms/awps/doc">Product documentation</a> |
<a href="https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/webpubsub/Azure.Messaging.WebPubSub/tests/Samples/">Samples</a></p>
<h2 id="getting-started">Getting started</h2>
<h3 id="install-the-package">Install the package</h3>
<p>Install the client library from <a href="https://www.nuget.org/">NuGet</a>:</p>
<pre><code class="lang-dotnetcli">dotnet add package Azure.Messaging.WebPubSub
</code></pre>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>An <a href="https://azure.microsoft.com/free/dotnet/">Azure subscription</a>.</li>
<li>An existing Azure Web PubSub service instance.</li>
</ul>
<h3 id="create-and-authenticate-a-webpubsubserviceclient">Create and authenticate a <code>WebPubSubServiceClient</code></h3>
<p>In order to interact with the service, you'll need to create an instance of the <code>WebPubSubServiceClient</code> class. To make this possible, you'll need the connection string or a key, which you can access in the Azure portal.</p>
<pre><code class="lang-C#">// Create a WebPubSubServiceClient that will authenticate using a key credential.
var serviceClient = new WebPubSubServiceClient(new Uri(endpoint), &quot;some_hub&quot;, new AzureKeyCredential(key));
</code></pre>
<h2 id="key-concepts">Key concepts</h2>
<h3 id="connection">Connection</h3>
<p>A connection, also known as a client or a client connection, represents an individual WebSocket connection connected to the Web PubSub service. When successfully connected, a unique connection ID is assigned to this connection by the Web PubSub service.</p>
<h3 id="hub">Hub</h3>
<p>A hub is a logical concept for a set of client connections. Usually you use one hub for one purpose, for example, a chat hub, or a notification hub. When a client connection is created, it connects to a hub, and during its lifetime, it belongs to that hub. Different applications can share one Azure Web PubSub service by using different hub names.</p>
<h3 id="group">Group</h3>
<p>A group is a subset of connections to the hub. You can add a client connection to a group, or remove the client connection from the group, anytime you want. For example, when a client joins a chat room, or when a client leaves the chat room, this chat room can be considered to be a group. A client can join multiple groups, and a group can contain multiple clients.</p>
<h3 id="user">User</h3>
<p>Connections to Web PubSub can belong to one user. A user might have multiple connections, for example when a single user is connected across multiple devices or multiple browser tabs.</p>
<h3 id="message">Message</h3>
<p>When a client is connected, it can send messages to the upstream application, or receive messages from the upstream application, through the WebSocket connection.</p>
<h2 id="examples">Examples</h2>
<h3 id="broadcast-a-text-message-to-all-clients">Broadcast a text message to all clients</h3>
<pre><code class="lang-C#">var serviceClient = new WebPubSubServiceClient(connectionString, &quot;some_hub&quot;);

serviceClient.SendToAll(&quot;Hello World!&quot;);
</code></pre>
<h3 id="broadcast-a-json-message-to-all-clients">Broadcast a JSON message to all clients</h3>
<pre><code class="lang-C#">var serviceClient = new WebPubSubServiceClient(connectionString, &quot;some_hub&quot;);

serviceClient.SendToAll(RequestContent.Create(
        new
        {
            Foo = &quot;Hello World!&quot;,
            Bar = 42
        }),
        ContentType.ApplicationJson);
</code></pre>
<h3 id="broadcast-a-binary-message-to-all-clients">Broadcast a binary message to all clients</h3>
<pre><code class="lang-C#">var serviceClient = new WebPubSubServiceClient(connectionString, &quot;some_hub&quot;);

Stream stream = BinaryData.FromString(&quot;Hello World!&quot;).ToStream();
serviceClient.SendToAll(RequestContent.Create(stream), ContentType.ApplicationOctetStream);
</code></pre>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="setting-up-console-logging">Setting up console logging</h3>
<p>You can also easily <a href="https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/core/Azure.Core/samples/Diagnostics.md#logging">enable console logging</a> if you want to dig deeper into the requests you're making against the service.</p>
<h2 id="next-steps">Next steps</h2>
<p>Please take a look at the
<a href="https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/webpubsub/Azure.Messaging.WebPubSub/tests/Samples/">samples</a>
directory for detailed examples on how to use this library.</p>
<p>You can also find <a href="https://github.com/Azure/azure-webpubsub/tree/main/samples/csharp">more samples here</a>.</p>
<h2 id="contributing">Contributing</h2>
<p>This project welcomes contributions and suggestions.
Most contributions require you to agree to a Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us the rights to use your contribution.
For details, visit <a href="https://cla.microsoft.com.">https://cla.microsoft.com.</a></p>
<p>When you submit a pull request, a CLA-bot will automatically determine whether you need to provide a CLA and decorate the PR appropriately (e.g., label, comment).
Simply follow the instructions provided by the bot.
You will only need to do this once across all repos using our CLA.</p>
<p>This project has adopted the <a href="https://opensource.microsoft.com/codeofconduct/">Microsoft Open Source Code of Conduct</a>.
For more information see the <a href="https://opensource.microsoft.com/codeofconduct/faq/">Code of Conduct FAQ</a> or contact <a href="mailto:opencode@microsoft.com">opencode@microsoft.com</a> with any additional questions or comments.</p>
<p><img src="https://azure-sdk-impressions.azurewebsites.net/api/impressions/azure-sdk-for-net%2Fsdk%2Ftemplate%2FAzure.Template%2FREADME.png" alt="Impressions"></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Azure SDK for .NET
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="./styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="./styles/docfx.js"></script>
    <script type="text/javascript" src="./styles/main.js"></script>
  </body>
</html>
