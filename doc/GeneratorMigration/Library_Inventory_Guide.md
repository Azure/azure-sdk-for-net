# Azure SDK for .NET Library Inventory Guide

This document outlines how to generate and maintain the inventory of libraries in the Azure SDK for .NET repository.

## Purpose

The library inventory helps us:

1. Track all libraries in the repository
2. Categorize them as data plane or management plane
3. Identify which generator (Swagger or TypeSpec) they use
4. Plan migrations to newer generators

## Generating the Inventory

To generate the library inventory:

1. Run the `Library_Inventory.py` script from the repository root:

```bash
python doc/GeneratorMigration/Library_Inventory.py
```

2. The script will:
   - Scan all libraries in the `sdk/` directory
   - Categorize them by type (data plane or management plane)
   - Identify the generator used (Swagger or TypeSpec)
   - Generate a markdown report (`doc/GeneratorMigration/Library_Inventory.md`)

3. If you need JSON output for programmatic use, use the `--json` flag:

```bash
python doc/GeneratorMigration/Library_Inventory.py --json
```
   - This will generate an additional `Library_Inventory.json` file with the raw inventory data

## Inventory Classification Logic

The script uses the following logic to categorize libraries:

### Data Plane vs Management Plane

- **Management Plane**: Libraries that contain "Azure.ResourceManager" or ".Management." in their path
- **Data Plane**: All other libraries

### Swagger vs TypeSpec (TSP)

The script looks for evidence of TypeSpec usage in the following order:

1. Direct TypeSpec indicators:
   - `tsp-location.yaml` file with an `emitterPackageJsonPath` value
   - `src/tspconfig.yaml` file
   - `src/tsp` directory
   - `.tsp` files in the src directory

2. TypeSpec references in `src/autorest.md`:
   - "typespec" keyword
   - "emit-yaml-tags: tsp" directive
   - TypeScript SDK folder output paths
   - "azure-typespec" references

3. Swagger indicators:
   - "input-file:" pointing to JSON files in `src/autorest.md`
   - `src/Generated` directory exists
   - Files with `<auto-generated/>` comment headers

If none of these TypeSpec indicators are found but there is evidence of code generation 
(like a `src/Generated` directory or files with `<auto-generated/>` markers), the script assumes Swagger.

## Understanding the Results

The inventory markdown file provides:

1. Overall summary counts
2. Tables for each category:
   - Data Plane libraries using TypeSpec
   - Data Plane libraries using Swagger
   - Management Plane libraries using TypeSpec
   - Management Plane libraries using Swagger
   - Libraries with unknown generator

## Updating the Inventory

The inventory should be updated whenever:

1. New libraries are added to the repository
2. Libraries are migrated from Swagger to TypeSpec
3. Preparing for migration planning

Simply run the script again to regenerate the inventory files.