trigger: none

extends:
  template: ../../eng/pipelines/templates/jobs/archetype-sdk-tests-multiple.yml
  parameters:
    jobs:
      # Azure Cloud
      - ServiceDirectory: keyvault
        TimeoutInMinutes: 120
        ScenarioName: AzureCloud
        SubscriptionConfiguration: $(sub-config-azure-cloud-test-resources)
        ArmTemplateParameters: "@{ keyVaultDomainSuffix = '.vault.azure.net' }"
        EnvVars:
          # Runs samples with live tests.
          AZURE_KEYVAULT_TEST_MODE: Live
          AZURE_AUTHORITY_HOST: https://login.microsoftonline.com

      # AzureUSGovernment
      - ServiceDirectory: keyvault
        ScenarioName: AzureUSGovernment
        SubscriptionConfiguration: $(sub-config-gov-test-resources)
        ArmTemplateParameters: "@{ keyVaultDomainSuffix = '.vault.usgovcloudapi.net' }"
        EnvVars:
          # Runs samples with live tests.
          AZURE_KEYVAULT_TEST_MODE: Live
          AZURE_AUTHORITY_HOST: https://login.microsoftonline.us

      # AzureChinaCloud
      - ServiceDirectory: keyvault
        ScenarioName: AzureChinaCloud
        SubscriptionConfiguration: $(sub-config-cn-test-resources)
        ArmTemplateParameters: "@{ keyVaultDomainSuffix = '.vault.azure.cn'; keyVaultSku = 'standard' }"
        EnvVars:
          # Runs samples with live tests.
          AZURE_KEYVAULT_TEST_MODE: Live
          AZURE_AUTHORITY_HOST: https://login.chinacloudapi.cn
