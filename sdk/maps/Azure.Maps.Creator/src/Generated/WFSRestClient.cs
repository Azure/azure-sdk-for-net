// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

// <auto-generated/>

#nullable disable

using System;
using System.Text.Json;
using System.Threading;
using System.Threading.Tasks;
using Azure;
using Azure.Core;
using Azure.Core.Pipeline;
using Azure.Maps.Creator.Models;

namespace Azure.Maps.Creator
{
    internal partial class WFSRestClient
    {
        private Geography? geography;
        private string xMsClientId;
        private ClientDiagnostics _clientDiagnostics;
        private HttpPipeline _pipeline;

        /// <summary> Initializes a new instance of WFSRestClient. </summary>
        /// <param name="clientDiagnostics"> The handler for diagnostic messaging in the client. </param>
        /// <param name="pipeline"> The HTTP pipeline for sending and receiving REST requests and responses. </param>
        /// <param name="geography"> This parameter specifies where the Azure Maps Creator resource is located.  Valid values are us and eu. </param>
        /// <param name="xMsClientId"> Specifies which account is intended for usage in conjunction with the Azure AD security model.  It represents a unique ID for the Azure Maps account and can be retrieved from the Azure Maps management  plane Account API. To use Azure AD security in Azure Maps see the following [articles](https://aka.ms/amauthdetails) for guidance. </param>
        public WFSRestClient(ClientDiagnostics clientDiagnostics, HttpPipeline pipeline, Geography? geography = default, string xMsClientId = null)
        {
            geography ??= Geography.Us;

            this.geography = geography;
            this.xMsClientId = xMsClientId;
            _clientDiagnostics = clientDiagnostics;
            _pipeline = pipeline;
        }

        internal HttpMessage CreateGetLandingPageRequest(string datasetId)
        {
            var message = _pipeline.CreateMessage();
            var request = message.Request;
            request.Method = RequestMethod.Get;
            var uri = new RawRequestUriBuilder();
            uri.AppendRaw("https://", false);
            uri.AppendRaw(geography.Value, true);
            uri.AppendRaw(".atlas.microsoft.com", false);
            uri.AppendPath("/wfs/datasets/", false);
            uri.AppendPath(datasetId, true);
            uri.AppendPath("/", false);
            uri.AppendQuery("api-version", "2.0", true);
            request.Uri = uri;
            if (xMsClientId != null)
            {
                request.Headers.Add("x-ms-client-id", xMsClientId);
            }
            request.Headers.Add("Accept", "application/json");
            return message;
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// The Get Landing Page API provides links to the API definition, the Conformance statements  and the metadata about the feature data in this dataset.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/> is null. </exception>
        public async Task<Response<LandingPageResponse>> GetLandingPageAsync(string datasetId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }

            using var message = CreateGetLandingPageRequest(datasetId);
            await _pipeline.SendAsync(message, cancellationToken).ConfigureAwait(false);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        LandingPageResponse value = default;
                        using var document = await JsonDocument.ParseAsync(message.Response.ContentStream, default, cancellationToken).ConfigureAwait(false);
                        value = LandingPageResponse.DeserializeLandingPageResponse(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw await _clientDiagnostics.CreateRequestFailedExceptionAsync(message.Response).ConfigureAwait(false);
            }
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// The Get Landing Page API provides links to the API definition, the Conformance statements  and the metadata about the feature data in this dataset.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/> is null. </exception>
        public Response<LandingPageResponse> GetLandingPage(string datasetId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }

            using var message = CreateGetLandingPageRequest(datasetId);
            _pipeline.Send(message, cancellationToken);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        LandingPageResponse value = default;
                        using var document = JsonDocument.Parse(message.Response.ContentStream);
                        value = LandingPageResponse.DeserializeLandingPageResponse(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw _clientDiagnostics.CreateRequestFailedException(message.Response);
            }
        }

        internal HttpMessage CreateGetConformanceRequest(string datasetId)
        {
            var message = _pipeline.CreateMessage();
            var request = message.Request;
            request.Method = RequestMethod.Get;
            var uri = new RawRequestUriBuilder();
            uri.AppendRaw("https://", false);
            uri.AppendRaw(geography.Value, true);
            uri.AppendRaw(".atlas.microsoft.com", false);
            uri.AppendPath("/wfs/datasets/", false);
            uri.AppendPath(datasetId, true);
            uri.AppendPath("/conformance", false);
            uri.AppendQuery("api-version", "2.0", true);
            request.Uri = uri;
            if (xMsClientId != null)
            {
                request.Headers.Add("x-ms-client-id", xMsClientId);
            }
            request.Headers.Add("Accept", "application/json");
            return message;
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        /// The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// The Get Requirements Classes lists all requirements classes specified in the standard that the server conforms to.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/> is null. </exception>
        public async Task<Response<ConformanceResponse>> GetConformanceAsync(string datasetId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }

            using var message = CreateGetConformanceRequest(datasetId);
            await _pipeline.SendAsync(message, cancellationToken).ConfigureAwait(false);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        ConformanceResponse value = default;
                        using var document = await JsonDocument.ParseAsync(message.Response.ContentStream, default, cancellationToken).ConfigureAwait(false);
                        value = ConformanceResponse.DeserializeConformanceResponse(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw await _clientDiagnostics.CreateRequestFailedExceptionAsync(message.Response).ConfigureAwait(false);
            }
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        /// The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// The Get Requirements Classes lists all requirements classes specified in the standard that the server conforms to.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/> is null. </exception>
        public Response<ConformanceResponse> GetConformance(string datasetId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }

            using var message = CreateGetConformanceRequest(datasetId);
            _pipeline.Send(message, cancellationToken);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        ConformanceResponse value = default;
                        using var document = JsonDocument.Parse(message.Response.ContentStream);
                        value = ConformanceResponse.DeserializeConformanceResponse(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw _clientDiagnostics.CreateRequestFailedException(message.Response);
            }
        }

        internal HttpMessage CreateGetCollectionsRequest(string datasetId)
        {
            var message = _pipeline.CreateMessage();
            var request = message.Request;
            request.Method = RequestMethod.Get;
            var uri = new RawRequestUriBuilder();
            uri.AppendRaw("https://", false);
            uri.AppendRaw(geography.Value, true);
            uri.AppendRaw(".atlas.microsoft.com", false);
            uri.AppendPath("/wfs/datasets/", false);
            uri.AppendPath(datasetId, true);
            uri.AppendPath("/collections", false);
            uri.AppendQuery("api-version", "2.0", true);
            request.Uri = uri;
            if (xMsClientId != null)
            {
                request.Headers.Add("x-ms-client-id", xMsClientId);
            }
            request.Headers.Add("Accept", "application/json");
            return message;
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// The Collections Description API provides descriptions of all the collections in a given dataset.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/> is null. </exception>
        public async Task<Response<CollectionsResponse>> GetCollectionsAsync(string datasetId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }

            using var message = CreateGetCollectionsRequest(datasetId);
            await _pipeline.SendAsync(message, cancellationToken).ConfigureAwait(false);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        CollectionsResponse value = default;
                        using var document = await JsonDocument.ParseAsync(message.Response.ContentStream, default, cancellationToken).ConfigureAwait(false);
                        value = CollectionsResponse.DeserializeCollectionsResponse(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw await _clientDiagnostics.CreateRequestFailedExceptionAsync(message.Response).ConfigureAwait(false);
            }
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// The Collections Description API provides descriptions of all the collections in a given dataset.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/> is null. </exception>
        public Response<CollectionsResponse> GetCollections(string datasetId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }

            using var message = CreateGetCollectionsRequest(datasetId);
            _pipeline.Send(message, cancellationToken);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        CollectionsResponse value = default;
                        using var document = JsonDocument.Parse(message.Response.ContentStream);
                        value = CollectionsResponse.DeserializeCollectionsResponse(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw _clientDiagnostics.CreateRequestFailedException(message.Response);
            }
        }

        internal HttpMessage CreateGetCollectionRequest(string datasetId, string collectionId)
        {
            var message = _pipeline.CreateMessage();
            var request = message.Request;
            request.Method = RequestMethod.Get;
            var uri = new RawRequestUriBuilder();
            uri.AppendRaw("https://", false);
            uri.AppendRaw(geography.Value, true);
            uri.AppendRaw(".atlas.microsoft.com", false);
            uri.AppendPath("/wfs/datasets/", false);
            uri.AppendPath(datasetId, true);
            uri.AppendPath("/collections/", false);
            uri.AppendPath(collectionId, true);
            uri.AppendQuery("api-version", "2.0", true);
            request.Uri = uri;
            if (xMsClientId != null)
            {
                request.Headers.Add("x-ms-client-id", xMsClientId);
            }
            request.Headers.Add("Accept", "application/json");
            return message;
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// 
        /// The Collection Description API provides the description of a given collection. It includes the links to the operations that can be performed on the collection.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="collectionId"> Identifier (name) of a specific collection. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/> or <paramref name="collectionId"/> is null. </exception>
        public async Task<Response<CollectionInfo>> GetCollectionAsync(string datasetId, string collectionId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }
            if (collectionId == null)
            {
                throw new ArgumentNullException(nameof(collectionId));
            }

            using var message = CreateGetCollectionRequest(datasetId, collectionId);
            await _pipeline.SendAsync(message, cancellationToken).ConfigureAwait(false);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        CollectionInfo value = default;
                        using var document = await JsonDocument.ParseAsync(message.Response.ContentStream, default, cancellationToken).ConfigureAwait(false);
                        value = CollectionInfo.DeserializeCollectionInfo(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw await _clientDiagnostics.CreateRequestFailedExceptionAsync(message.Response).ConfigureAwait(false);
            }
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// 
        /// The Collection Description API provides the description of a given collection. It includes the links to the operations that can be performed on the collection.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="collectionId"> Identifier (name) of a specific collection. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/> or <paramref name="collectionId"/> is null. </exception>
        public Response<CollectionInfo> GetCollection(string datasetId, string collectionId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }
            if (collectionId == null)
            {
                throw new ArgumentNullException(nameof(collectionId));
            }

            using var message = CreateGetCollectionRequest(datasetId, collectionId);
            _pipeline.Send(message, cancellationToken);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        CollectionInfo value = default;
                        using var document = JsonDocument.Parse(message.Response.ContentStream);
                        value = CollectionInfo.DeserializeCollectionInfo(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw _clientDiagnostics.CreateRequestFailedException(message.Response);
            }
        }

        internal HttpMessage CreateGetCollectionDefinitionRequest(string datasetId, string collectionId)
        {
            var message = _pipeline.CreateMessage();
            var request = message.Request;
            request.Method = RequestMethod.Get;
            var uri = new RawRequestUriBuilder();
            uri.AppendRaw("https://", false);
            uri.AppendRaw(geography.Value, true);
            uri.AppendRaw(".atlas.microsoft.com", false);
            uri.AppendPath("/wfs/datasets/", false);
            uri.AppendPath(datasetId, true);
            uri.AppendPath("/collections/", false);
            uri.AppendPath(collectionId, true);
            uri.AppendPath("/definition", false);
            uri.AppendQuery("api-version", "2.0", true);
            request.Uri = uri;
            if (xMsClientId != null)
            {
                request.Headers.Add("x-ms-client-id", xMsClientId);
            }
            request.Headers.Add("Accept", "application/json");
            return message;
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  [This](https://docs.microsoft.com/en-us/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// 
        /// The Collection Definition API provides the detailed data model of a given collection.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="collectionId"> Identifier (name) of a specific collection. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/> or <paramref name="collectionId"/> is null. </exception>
        public async Task<Response<CollectionDefinitionResponse>> GetCollectionDefinitionAsync(string datasetId, string collectionId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }
            if (collectionId == null)
            {
                throw new ArgumentNullException(nameof(collectionId));
            }

            using var message = CreateGetCollectionDefinitionRequest(datasetId, collectionId);
            await _pipeline.SendAsync(message, cancellationToken).ConfigureAwait(false);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        CollectionDefinitionResponse value = default;
                        using var document = await JsonDocument.ParseAsync(message.Response.ContentStream, default, cancellationToken).ConfigureAwait(false);
                        value = CollectionDefinitionResponse.DeserializeCollectionDefinitionResponse(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw await _clientDiagnostics.CreateRequestFailedExceptionAsync(message.Response).ConfigureAwait(false);
            }
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  [This](https://docs.microsoft.com/en-us/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// 
        /// The Collection Definition API provides the detailed data model of a given collection.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="collectionId"> Identifier (name) of a specific collection. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/> or <paramref name="collectionId"/> is null. </exception>
        public Response<CollectionDefinitionResponse> GetCollectionDefinition(string datasetId, string collectionId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }
            if (collectionId == null)
            {
                throw new ArgumentNullException(nameof(collectionId));
            }

            using var message = CreateGetCollectionDefinitionRequest(datasetId, collectionId);
            _pipeline.Send(message, cancellationToken);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        CollectionDefinitionResponse value = default;
                        using var document = JsonDocument.Parse(message.Response.ContentStream);
                        value = CollectionDefinitionResponse.DeserializeCollectionDefinitionResponse(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw _clientDiagnostics.CreateRequestFailedException(message.Response);
            }
        }

        internal HttpMessage CreateGetFeaturesRequest(string datasetId, string collectionId, int? limit, string bbox, string filter)
        {
            var message = _pipeline.CreateMessage();
            var request = message.Request;
            request.Method = RequestMethod.Get;
            var uri = new RawRequestUriBuilder();
            uri.AppendRaw("https://", false);
            uri.AppendRaw(geography.Value, true);
            uri.AppendRaw(".atlas.microsoft.com", false);
            uri.AppendPath("/wfs/datasets/", false);
            uri.AppendPath(datasetId, true);
            uri.AppendPath("/collections/", false);
            uri.AppendPath(collectionId, true);
            uri.AppendPath("/items", false);
            uri.AppendQuery("api-version", "2.0", true);
            if (limit != null)
            {
                uri.AppendQuery("limit", limit.Value, true);
            }
            if (bbox != null)
            {
                uri.AppendQuery("bbox", bbox, true);
            }
            if (filter != null)
            {
                uri.AppendQuery("filter", filter, true);
            }
            request.Uri = uri;
            if (xMsClientId != null)
            {
                request.Headers.Add("x-ms-client-id", xMsClientId);
            }
            request.Headers.Add("Accept", "application/json");
            return message;
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// The Get Features API returns the list of features in the given collection.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="collectionId"> Identifier (name) of a specific collection. </param>
        /// <param name="limit">
        /// The optional limit parameter limits the number of features that are presented in the response document.
        /// Only features that are on the first level of the collection in the response document are counted. Nested objects contained within the explicitly requested features shall not be counted.
        /// * Minimum = 1 * Maximum = 50 * Default = 10.
        /// </param>
        /// <param name="bbox">
        /// Only features that have a geometry that intersects the supplied bounding box are selected.
        /// * Lower left corner, coordinate axis 1 * Lower left corner, coordinate axis 2 * Upper right corner, coordinate axis 1 * Upper right corner, coordinate axis 2
        /// The coordinate reference system of the values is WGS84 longitude/latitude (http://www.opengis.net/def/crs/OGC/1.3/CRS84) unless a different coordinate reference system is specified in the parameter `bbox-crs`.
        /// For WGS84 longitude/latitude the values are in most cases the sequence of minimum longitude, minimum latitude, maximum longitude and maximum latitude. However, in cases where the box spans the antimeridian the first value (west-most box edge) is larger than the third value (east-most box edge).
        /// </param>
        /// <param name="filter">
        /// Filter expression to search for features with specific property values in a given collection. Only feature properties of scalar type and equals operator are supported.
        /// This is a special parameter where the parameter name is a case sensitive property name. The scheme for this parameter is {property name}={property value}. Unless &quot;filter&quot; is one of the property names in the collection, &quot;filter&quot; should not be used as a parameter name. To search for features with &quot;name&quot; property value &quot;21N13&quot;, use &quot;name=21N13&quot;.
        /// Multiple filters are supported and should be represented as multiple query parameters. E.g., &lt;property1&gt;=&lt;value1&gt;&amp;&lt;property2&gt;=&lt;value2&gt; String values are case sensitive.
        /// </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/> or <paramref name="collectionId"/> is null. </exception>
        public async Task<Response<ExtendedGeoJsonFeatureCollection>> GetFeaturesAsync(string datasetId, string collectionId, int? limit = null, string bbox = null, string filter = null, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }
            if (collectionId == null)
            {
                throw new ArgumentNullException(nameof(collectionId));
            }

            using var message = CreateGetFeaturesRequest(datasetId, collectionId, limit, bbox, filter);
            await _pipeline.SendAsync(message, cancellationToken).ConfigureAwait(false);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        ExtendedGeoJsonFeatureCollection value = default;
                        using var document = await JsonDocument.ParseAsync(message.Response.ContentStream, default, cancellationToken).ConfigureAwait(false);
                        value = ExtendedGeoJsonFeatureCollection.DeserializeExtendedGeoJsonFeatureCollection(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw await _clientDiagnostics.CreateRequestFailedExceptionAsync(message.Response).ConfigureAwait(false);
            }
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// The Get Features API returns the list of features in the given collection.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="collectionId"> Identifier (name) of a specific collection. </param>
        /// <param name="limit">
        /// The optional limit parameter limits the number of features that are presented in the response document.
        /// Only features that are on the first level of the collection in the response document are counted. Nested objects contained within the explicitly requested features shall not be counted.
        /// * Minimum = 1 * Maximum = 50 * Default = 10.
        /// </param>
        /// <param name="bbox">
        /// Only features that have a geometry that intersects the supplied bounding box are selected.
        /// * Lower left corner, coordinate axis 1 * Lower left corner, coordinate axis 2 * Upper right corner, coordinate axis 1 * Upper right corner, coordinate axis 2
        /// The coordinate reference system of the values is WGS84 longitude/latitude (http://www.opengis.net/def/crs/OGC/1.3/CRS84) unless a different coordinate reference system is specified in the parameter `bbox-crs`.
        /// For WGS84 longitude/latitude the values are in most cases the sequence of minimum longitude, minimum latitude, maximum longitude and maximum latitude. However, in cases where the box spans the antimeridian the first value (west-most box edge) is larger than the third value (east-most box edge).
        /// </param>
        /// <param name="filter">
        /// Filter expression to search for features with specific property values in a given collection. Only feature properties of scalar type and equals operator are supported.
        /// This is a special parameter where the parameter name is a case sensitive property name. The scheme for this parameter is {property name}={property value}. Unless &quot;filter&quot; is one of the property names in the collection, &quot;filter&quot; should not be used as a parameter name. To search for features with &quot;name&quot; property value &quot;21N13&quot;, use &quot;name=21N13&quot;.
        /// Multiple filters are supported and should be represented as multiple query parameters. E.g., &lt;property1&gt;=&lt;value1&gt;&amp;&lt;property2&gt;=&lt;value2&gt; String values are case sensitive.
        /// </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/> or <paramref name="collectionId"/> is null. </exception>
        public Response<ExtendedGeoJsonFeatureCollection> GetFeatures(string datasetId, string collectionId, int? limit = null, string bbox = null, string filter = null, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }
            if (collectionId == null)
            {
                throw new ArgumentNullException(nameof(collectionId));
            }

            using var message = CreateGetFeaturesRequest(datasetId, collectionId, limit, bbox, filter);
            _pipeline.Send(message, cancellationToken);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        ExtendedGeoJsonFeatureCollection value = default;
                        using var document = JsonDocument.Parse(message.Response.ContentStream);
                        value = ExtendedGeoJsonFeatureCollection.DeserializeExtendedGeoJsonFeatureCollection(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw _clientDiagnostics.CreateRequestFailedException(message.Response);
            }
        }

        internal HttpMessage CreateGetFeatureRequest(string datasetId, string collectionId, string featureId)
        {
            var message = _pipeline.CreateMessage();
            var request = message.Request;
            request.Method = RequestMethod.Get;
            var uri = new RawRequestUriBuilder();
            uri.AppendRaw("https://", false);
            uri.AppendRaw(geography.Value, true);
            uri.AppendRaw(".atlas.microsoft.com", false);
            uri.AppendPath("/wfs/datasets/", false);
            uri.AppendPath(datasetId, true);
            uri.AppendPath("/collections/", false);
            uri.AppendPath(collectionId, true);
            uri.AppendPath("/items/", false);
            uri.AppendPath(featureId, true);
            uri.AppendQuery("api-version", "2.0", true);
            request.Uri = uri;
            request.Headers.Add("Accept", "application/json");
            return message;
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// The Get Feature API returns the feature identified by the provided id in the given collection.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="collectionId"> Identifier (name) of a specific collection. </param>
        /// <param name="featureId"> Local identifier of a specific feature. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/>, <paramref name="collectionId"/>, or <paramref name="featureId"/> is null. </exception>
        public async Task<Response<FeatureResponse>> GetFeatureAsync(string datasetId, string collectionId, string featureId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }
            if (collectionId == null)
            {
                throw new ArgumentNullException(nameof(collectionId));
            }
            if (featureId == null)
            {
                throw new ArgumentNullException(nameof(featureId));
            }

            using var message = CreateGetFeatureRequest(datasetId, collectionId, featureId);
            await _pipeline.SendAsync(message, cancellationToken).ConfigureAwait(false);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        FeatureResponse value = default;
                        using var document = await JsonDocument.ParseAsync(message.Response.ContentStream, default, cancellationToken).ConfigureAwait(false);
                        value = FeatureResponse.DeserializeFeatureResponse(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw await _clientDiagnostics.CreateRequestFailedExceptionAsync(message.Response).ConfigureAwait(false);
            }
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// The Get Feature API returns the feature identified by the provided id in the given collection.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="collectionId"> Identifier (name) of a specific collection. </param>
        /// <param name="featureId"> Local identifier of a specific feature. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/>, <paramref name="collectionId"/>, or <paramref name="featureId"/> is null. </exception>
        public Response<FeatureResponse> GetFeature(string datasetId, string collectionId, string featureId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }
            if (collectionId == null)
            {
                throw new ArgumentNullException(nameof(collectionId));
            }
            if (featureId == null)
            {
                throw new ArgumentNullException(nameof(featureId));
            }

            using var message = CreateGetFeatureRequest(datasetId, collectionId, featureId);
            _pipeline.Send(message, cancellationToken);
            switch (message.Response.Status)
            {
                case 200:
                    {
                        FeatureResponse value = default;
                        using var document = JsonDocument.Parse(message.Response.ContentStream);
                        value = FeatureResponse.DeserializeFeatureResponse(document.RootElement);
                        return Response.FromValue(value, message.Response);
                    }
                default:
                    throw _clientDiagnostics.CreateRequestFailedException(message.Response);
            }
        }

        internal HttpMessage CreateDeleteFeatureRequest(string datasetId, string collectionId, string featureId)
        {
            var message = _pipeline.CreateMessage();
            var request = message.Request;
            request.Method = RequestMethod.Delete;
            var uri = new RawRequestUriBuilder();
            uri.AppendRaw("https://", false);
            uri.AppendRaw(geography.Value, true);
            uri.AppendRaw(".atlas.microsoft.com", false);
            uri.AppendPath("/wfs/datasets/", false);
            uri.AppendPath(datasetId, true);
            uri.AppendPath("/collections/", false);
            uri.AppendPath(collectionId, true);
            uri.AppendPath("/items/", false);
            uri.AppendPath(featureId, true);
            uri.AppendQuery("api-version", "2.0", true);
            request.Uri = uri;
            request.Headers.Add("Accept", "application/json");
            return message;
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// The Delete Feature API deletes the feature identified by the provided id in the given collection. At this point this API supports only facility features. Deleting a facility feature deletes all the child features of that facility recursively.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="collectionId"> Identifier (name) of a specific collection. </param>
        /// <param name="featureId"> Local identifier of a specific feature. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/>, <paramref name="collectionId"/>, or <paramref name="featureId"/> is null. </exception>
        public async Task<Response> DeleteFeatureAsync(string datasetId, string collectionId, string featureId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }
            if (collectionId == null)
            {
                throw new ArgumentNullException(nameof(collectionId));
            }
            if (featureId == null)
            {
                throw new ArgumentNullException(nameof(featureId));
            }

            using var message = CreateDeleteFeatureRequest(datasetId, collectionId, featureId);
            await _pipeline.SendAsync(message, cancellationToken).ConfigureAwait(false);
            switch (message.Response.Status)
            {
                case 204:
                    return message.Response;
                default:
                    throw await _clientDiagnostics.CreateRequestFailedExceptionAsync(message.Response).ConfigureAwait(false);
            }
        }

        /// <summary>
        /// **Applies to:** see pricing [tiers](https://aka.ms/AzureMapsPricingTier).
        /// 
        /// Creator makes it possible to develop applications based on your private indoor map data using Azure Maps API and SDK. [This](https://docs.microsoft.com/azure/azure-maps/creator-indoor-maps) article introduces concepts and tools that apply to Azure Maps Creator.
        /// 
        ///  The Web Feature Service (WFS) API is part of  Creator. WFS API follows the [Open Geospatial Consortium API standard for Features](http://docs.opengeospatial.org/is/17-069r3/17-069r3.html) to query [Datasets](https://docs.microsoft.com/en-us/rest/api/maps/dataset/createpreview).
        /// A dataset consists of multiple feature collections. A feature collection is a collection of features of a similar type, based on a common schema.
        /// The Delete Feature API deletes the feature identified by the provided id in the given collection. At this point this API supports only facility features. Deleting a facility feature deletes all the child features of that facility recursively.
        /// </summary>
        /// <param name="datasetId"> The identifier for the dataset to query from. </param>
        /// <param name="collectionId"> Identifier (name) of a specific collection. </param>
        /// <param name="featureId"> Local identifier of a specific feature. </param>
        /// <param name="cancellationToken"> The cancellation token to use. </param>
        /// <exception cref="ArgumentNullException"> <paramref name="datasetId"/>, <paramref name="collectionId"/>, or <paramref name="featureId"/> is null. </exception>
        public Response DeleteFeature(string datasetId, string collectionId, string featureId, CancellationToken cancellationToken = default)
        {
            if (datasetId == null)
            {
                throw new ArgumentNullException(nameof(datasetId));
            }
            if (collectionId == null)
            {
                throw new ArgumentNullException(nameof(collectionId));
            }
            if (featureId == null)
            {
                throw new ArgumentNullException(nameof(featureId));
            }

            using var message = CreateDeleteFeatureRequest(datasetId, collectionId, featureId);
            _pipeline.Send(message, cancellationToken);
            switch (message.Response.Status)
            {
                case 204:
                    return message.Response;
                default:
                    throw _clientDiagnostics.CreateRequestFailedException(message.Response);
            }
        }
    }
}
