// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

// <auto-generated/>

#nullable disable

using System.Collections.Generic;
using System.Net;
using System.Threading.Tasks;
using Azure.Core.TestFramework;
using Azure.ResourceManager.Resources;
using Azure.ResourceManager.Resources.Models;
using Azure.ResourceManager.Sql;
using Azure.ResourceManager.Sql.Models;
using Azure.ResourceManager.TestFramework;

namespace Azure.ResourceManager.Sql.Tests.Mock
{
    /// <summary> Test for ManagedDatabase. </summary>
    public partial class ManagedDatabaseMockTests : MockTestBase
    {
        public ManagedDatabaseMockTests(bool isAsync) : base(isAsync, RecordedTestMode.Record)
        {
            ServicePointManager.ServerCertificateValidationCallback += (sender, cert, chain, sslPolicyErrors) => true;
            System.Environment.SetEnvironmentVariable("RESOURCE_MANAGER_URL", $"https://localhost:8443");
        }

        private async Task<Sql.ManagedDatabaseCollection> GetManagedDatabaseCollectionAsync(string resourceGroupName, string managedInstanceName)
        {
            ResourceGroup resourceGroup = await TestHelper.CreateResourceGroupAsync(resourceGroupName, GetArmClient());
            ManagedInstanceCollection managedInstanceCollection = resourceGroup.GetManagedInstances();
            var managedInstanceOperation = await TestHelper.CreateOrUpdateExampleInstanceAsync(managedInstanceCollection, managedInstanceName);
            ManagedInstance managedInstance = managedInstanceOperation.Value;
            ManagedDatabaseCollection managedDatabaseCollection = managedInstance.GetManagedDatabases();
            return managedDatabaseCollection;
        }

        private async Task<Sql.ManagedDatabase> GetManagedDatabaseAsync()
        {
            var collection = await GetManagedDatabaseCollectionAsync("Default-SQL-SouthEastAsia", "managedInstance");
            var createOperation = await TestHelper.CreateOrUpdateExampleInstanceAsync(collection, "managedDatabase");
            return createOperation.Value;
        }

        [RecordedTest]
        public async Task GetAsync()
        {
            // Example: Gets a managed database
            var managedDatabase = await GetManagedDatabaseAsync();

            await managedDatabase.GetAsync();
        }

        [RecordedTest]
        public async Task DeleteAsync()
        {
            // Example: Delete managed database
            var managedDatabase = await GetManagedDatabaseAsync();

            await managedDatabase.DeleteAsync();
        }

        [RecordedTest]
        public async Task UpdateAsync()
        {
            // Example: Updates a managed database with maximal properties
            var managedDatabase = await GetManagedDatabaseAsync();
            Sql.Models.ManagedDatabaseUpdate parameters = new Sql.Models.ManagedDatabaseUpdate();

            await managedDatabase.UpdateAsync(parameters);
        }

        [RecordedTest]
        public async Task UpdateAsync2()
        {
            // Example: Updates a managed database with minimal properties
            var managedDatabase = await GetManagedDatabaseAsync();
            Sql.Models.ManagedDatabaseUpdate parameters = new Sql.Models.ManagedDatabaseUpdate();

            await managedDatabase.UpdateAsync(parameters);
        }

        [RecordedTest]
        public async Task GetManagedDatabaseColumnsByDatabaseAsync()
        {
            // Example: Filter managed database columns
            var managedDatabase = await GetManagedDatabaseAsync();
            IEnumerable<string> schema = new List<string>()
{
"dbo",};
            IEnumerable<string> table = new List<string>()
{
"customer","address",};
            IEnumerable<string> column = new List<string>()
{
"username",};
            IEnumerable<string> orderBy = new List<string>()
{
"schema asc","table","column desc",};
            string skiptoken = null;

            managedDatabase.GetManagedDatabaseColumnsByDatabaseAsync(schema, table, column, orderBy, skiptoken);
        }

        [RecordedTest]
        public async Task GetManagedDatabaseColumnsByDatabaseAsync2()
        {
            // Example: List managed database columns
            var managedDatabase = await GetManagedDatabaseAsync();
            IEnumerable<string> schema = null;
            IEnumerable<string> table = null;
            IEnumerable<string> column = null;
            IEnumerable<string> orderBy = null;
            string skiptoken = null;

            managedDatabase.GetManagedDatabaseColumnsByDatabaseAsync(schema, table, column, orderBy, skiptoken);
        }

        [RecordedTest]
        public async Task GetManagedDatabaseQueryAsync()
        {
            // Example: Obtain query properties
            var managedDatabase = await GetManagedDatabaseAsync();
            string queryId = "42";

            await managedDatabase.GetManagedDatabaseQueryAsync(queryId);
        }

        [RecordedTest]
        public async Task GetQueryStatisticsAsync()
        {
            // Example: Obtain query execution statistics
            var managedDatabase = await GetManagedDatabaseAsync();
            string queryId = "42";
            string startTime = null;
            string endTime = null;
            Sql.Models.QueryTimeGrainType? interval = null;

            managedDatabase.GetQueryStatisticsAsync(queryId, startTime, endTime, interval);
        }

        [RecordedTest]
        public async Task GetQueryStatisticsAsync2()
        {
            // Example: Obtain query execution statistics. Example with all request parameters.
            var managedDatabase = await GetManagedDatabaseAsync();
            string queryId = "42";
            string startTime = "03/01/2020 16:23:09";
            string endTime = "03/11/2020 14:00:00";
            Sql.Models.QueryTimeGrainType? interval = new Sql.Models.QueryTimeGrainType("P1D");

            managedDatabase.GetQueryStatisticsAsync(queryId, startTime, endTime, interval);
        }

        [RecordedTest]
        public async Task GetQueryStatisticsAsync3()
        {
            // Example: Obtain query execution statistics. Minimal example with only mandatory request parameters.
            var managedDatabase = await GetManagedDatabaseAsync();
            string queryId = "42";
            string startTime = null;
            string endTime = null;
            Sql.Models.QueryTimeGrainType? interval = new Sql.Models.QueryTimeGrainType("PT1H");

            managedDatabase.GetQueryStatisticsAsync(queryId, startTime, endTime, interval);
        }

        [RecordedTest]
        public async Task CompleteRestoreAsync()
        {
            // Example: Completes a managed database external backup restore.
            var managedDatabase = await GetManagedDatabaseAsync();
            Sql.Models.CompleteDatabaseRestoreDefinition parameters = new Sql.Models.CompleteDatabaseRestoreDefinition("testdb1_log4");

            await managedDatabase.CompleteRestoreAsync(parameters);
        }

        [RecordedTest]
        public async Task GetManagedDatabaseSecurityEventsByDatabaseAsync()
        {
            // Example: Get the managed database's security events with maximal parameters
            var managedDatabase = await GetManagedDatabaseAsync();
            string filter = "ShowServerRecords eq true";
            int? skip = 0;
            int? top = 1;
            string skiptoken = "eyJCbG9iTmFtZURhdGVUaW1lIjoiXC9EYXRlKDE1MTIyODg4MTIwMTArMDIwMClcLyIsIkJsb2JOYW1lUm9sbG92ZXJJbmRleCI6IjAiLCJFbmREYXRlIjoiXC9EYXRlKDE1MTI0NjYyMDA1MjkpXC8iLCJJc1NraXBUb2tlblNldCI6ZmFsc2UsIklzVjJCbG9iVGltZUZvcm1hdCI6dHJ1ZSwiU2hvd1NlcnZlclJlY29yZHMiOmZhbHNlLCJTa2lwVmFsdWUiOjAsIlRha2VWYWx1ZSI6MTB9";

            managedDatabase.GetManagedDatabaseSecurityEventsByDatabaseAsync(filter, skip, top, skiptoken);
        }

        [RecordedTest]
        public async Task GetManagedDatabaseSecurityEventsByDatabaseAsync2()
        {
            // Example: Get the managed database's security events with minimal parameters
            var managedDatabase = await GetManagedDatabaseAsync();
            string filter = null;
            int? skip = null;
            int? top = null;
            string skiptoken = null;

            managedDatabase.GetManagedDatabaseSecurityEventsByDatabaseAsync(filter, skip, top, skiptoken);
        }

        [RecordedTest]
        public async Task GetCurrentManagedDatabaseSensitivityLabelsAsync()
        {
            // Example: Gets the current sensitivity labels of a given database in a managed database
            var managedDatabase = await GetManagedDatabaseAsync();
            string skipToken = null;
            bool? count = null;
            string filter = null;

            managedDatabase.GetCurrentManagedDatabaseSensitivityLabelsAsync(skipToken, count, filter);
        }

        [RecordedTest]
        public async Task UpdateManagedDatabaseSensitivityLabelAsync()
        {
            // Example: Update sensitivity labels of a given database using an operations batch.
            var managedDatabase = await GetManagedDatabaseAsync();
            Sql.Models.SensitivityLabelUpdateList parameters = new Sql.Models.SensitivityLabelUpdateList();

            await managedDatabase.UpdateManagedDatabaseSensitivityLabelAsync(parameters);
        }

        [RecordedTest]
        public async Task GetRecommendedManagedDatabaseSensitivityLabelsAsync()
        {
            // Example: Gets the recommended sensitivity labels of a given database in a managed database
            var managedDatabase = await GetManagedDatabaseAsync();
            string skipToken = null;
            bool? includeDisabledRecommendations = null;
            string filter = null;

            managedDatabase.GetRecommendedManagedDatabaseSensitivityLabelsAsync(skipToken, includeDisabledRecommendations, filter);
        }

        [RecordedTest]
        public async Task UpdateRecommendedManagedDatabaseSensitivityLabelAsync()
        {
            // Example: Update recommended sensitivity labels of a given database using an operations batch.
            var managedDatabase = await GetManagedDatabaseAsync();
            Sql.Models.RecommendedSensitivityLabelUpdateList parameters = new Sql.Models.RecommendedSensitivityLabelUpdateList();

            await managedDatabase.UpdateRecommendedManagedDatabaseSensitivityLabelAsync(parameters);
        }
    }
}
