// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

// <auto-generated/>

#nullable disable

using System;
using System.Collections.Generic;

namespace Azure.ResourceManager.ContainerService.Models
{
    /// <summary>
    /// Settings for upgrading an agentpool
    /// Serialized Name: AgentPoolUpgradeSettings
    /// </summary>
    public partial class AgentPoolUpgradeSettings
    {
        /// <summary>
        /// Keeps track of any properties unknown to the library.
        /// <para>
        /// To assign an object to the value of this property use <see cref="BinaryData.FromObjectAsJson{T}(T, System.Text.Json.JsonSerializerOptions?)"/>.
        /// </para>
        /// <para>
        /// To assign an already formatted json string to this property use <see cref="BinaryData.FromString(string)"/>.
        /// </para>
        /// <para>
        /// Examples:
        /// <list type="bullet">
        /// <item>
        /// <term>BinaryData.FromObjectAsJson("foo")</term>
        /// <description>Creates a payload of "foo".</description>
        /// </item>
        /// <item>
        /// <term>BinaryData.FromString("\"foo\"")</term>
        /// <description>Creates a payload of "foo".</description>
        /// </item>
        /// <item>
        /// <term>BinaryData.FromObjectAsJson(new { key = "value" })</term>
        /// <description>Creates a payload of { "key": "value" }.</description>
        /// </item>
        /// <item>
        /// <term>BinaryData.FromString("{\"key\": \"value\"}")</term>
        /// <description>Creates a payload of { "key": "value" }.</description>
        /// </item>
        /// </list>
        /// </para>
        /// </summary>
        private IDictionary<string, BinaryData> _serializedAdditionalRawData;

        /// <summary> Initializes a new instance of <see cref="AgentPoolUpgradeSettings"/>. </summary>
        public AgentPoolUpgradeSettings()
        {
        }

        /// <summary> Initializes a new instance of <see cref="AgentPoolUpgradeSettings"/>. </summary>
        /// <param name="maxSurge">
        /// The maximum number or percentage of nodes that are surged during upgrade. This can either be set to an integer (e.g. '5') or a percentage (e.g. '50%'). If a percentage is specified, it is the percentage of the total agent pool size at the time of the upgrade. For percentages, fractional nodes are rounded up. If not specified, the default is 10%. For more information, including best practices, see: https://learn.microsoft.com/en-us/azure/aks/upgrade-cluster
        /// Serialized Name: AgentPoolUpgradeSettings.maxSurge
        /// </param>
        /// <param name="maxUnavailable">
        /// The maximum number or percentage of nodes that can be simultaneously unavailable during upgrade. This can either be set to an integer (e.g. '1') or a percentage (e.g. '5%'). If a percentage is specified, it is the percentage of the total agent pool size at the time of the upgrade. For percentages, fractional nodes are rounded up. If not specified, the default is 0. For more information, including best practices, see: https://learn.microsoft.com/en-us/azure/aks/upgrade-cluster
        /// Serialized Name: AgentPoolUpgradeSettings.maxUnavailable
        /// </param>
        /// <param name="drainTimeoutInMinutes">
        /// The drain timeout for a node. The amount of time (in minutes) to wait on eviction of pods and graceful termination per node. This eviction wait time honors waiting on pod disruption budgets. If this time is exceeded, the upgrade fails. If not specified, the default is 30 minutes.
        /// Serialized Name: AgentPoolUpgradeSettings.drainTimeoutInMinutes
        /// </param>
        /// <param name="nodeSoakDurationInMinutes">
        /// The soak duration for a node. The amount of time (in minutes) to wait after draining a node and before reimaging it and moving on to next node. If not specified, the default is 0 minutes.
        /// Serialized Name: AgentPoolUpgradeSettings.nodeSoakDurationInMinutes
        /// </param>
        /// <param name="undrainableNodeBehavior">
        /// Defines the behavior for undrainable nodes during upgrade. The most common cause of undrainable nodes is Pod Disruption Budgets (PDBs), but other issues, such as pod termination grace period is exceeding the remaining per-node drain timeout or pod is still being in a running state, can also cause undrainable nodes.
        /// Serialized Name: AgentPoolUpgradeSettings.undrainableNodeBehavior
        /// </param>
        /// <param name="serializedAdditionalRawData"> Keeps track of any properties unknown to the library. </param>
        internal AgentPoolUpgradeSettings(string maxSurge, string maxUnavailable, int? drainTimeoutInMinutes, int? nodeSoakDurationInMinutes, UndrainableNodeBehavior? undrainableNodeBehavior, IDictionary<string, BinaryData> serializedAdditionalRawData)
        {
            MaxSurge = maxSurge;
            MaxUnavailable = maxUnavailable;
            DrainTimeoutInMinutes = drainTimeoutInMinutes;
            NodeSoakDurationInMinutes = nodeSoakDurationInMinutes;
            UndrainableNodeBehavior = undrainableNodeBehavior;
            _serializedAdditionalRawData = serializedAdditionalRawData;
        }

        /// <summary>
        /// The maximum number or percentage of nodes that are surged during upgrade. This can either be set to an integer (e.g. '5') or a percentage (e.g. '50%'). If a percentage is specified, it is the percentage of the total agent pool size at the time of the upgrade. For percentages, fractional nodes are rounded up. If not specified, the default is 10%. For more information, including best practices, see: https://learn.microsoft.com/en-us/azure/aks/upgrade-cluster
        /// Serialized Name: AgentPoolUpgradeSettings.maxSurge
        /// </summary>
        [WirePath("maxSurge")]
        public string MaxSurge { get; set; }
        /// <summary>
        /// The maximum number or percentage of nodes that can be simultaneously unavailable during upgrade. This can either be set to an integer (e.g. '1') or a percentage (e.g. '5%'). If a percentage is specified, it is the percentage of the total agent pool size at the time of the upgrade. For percentages, fractional nodes are rounded up. If not specified, the default is 0. For more information, including best practices, see: https://learn.microsoft.com/en-us/azure/aks/upgrade-cluster
        /// Serialized Name: AgentPoolUpgradeSettings.maxUnavailable
        /// </summary>
        [WirePath("maxUnavailable")]
        public string MaxUnavailable { get; set; }
        /// <summary>
        /// The drain timeout for a node. The amount of time (in minutes) to wait on eviction of pods and graceful termination per node. This eviction wait time honors waiting on pod disruption budgets. If this time is exceeded, the upgrade fails. If not specified, the default is 30 minutes.
        /// Serialized Name: AgentPoolUpgradeSettings.drainTimeoutInMinutes
        /// </summary>
        [WirePath("drainTimeoutInMinutes")]
        public int? DrainTimeoutInMinutes { get; set; }
        /// <summary>
        /// The soak duration for a node. The amount of time (in minutes) to wait after draining a node and before reimaging it and moving on to next node. If not specified, the default is 0 minutes.
        /// Serialized Name: AgentPoolUpgradeSettings.nodeSoakDurationInMinutes
        /// </summary>
        [WirePath("nodeSoakDurationInMinutes")]
        public int? NodeSoakDurationInMinutes { get; set; }
        /// <summary>
        /// Defines the behavior for undrainable nodes during upgrade. The most common cause of undrainable nodes is Pod Disruption Budgets (PDBs), but other issues, such as pod termination grace period is exceeding the remaining per-node drain timeout or pod is still being in a running state, can also cause undrainable nodes.
        /// Serialized Name: AgentPoolUpgradeSettings.undrainableNodeBehavior
        /// </summary>
        [WirePath("undrainableNodeBehavior")]
        public UndrainableNodeBehavior? UndrainableNodeBehavior { get; set; }
    }
}
