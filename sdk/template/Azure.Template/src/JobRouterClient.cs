// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

// <auto-generated/>

#nullable disable

using System;
using System.IO;
using System.Text.Json;
using System.Threading;
using System.Threading.Tasks;
using Azure.Communication.JobRouter.Models;
using Azure.Core;
using Azure.Core.Serialization;

namespace Azure.Communication.JobRouter
{
#pragma warning disable CS1591 // Missing XML comment for publicly visible type or member
    // Data plane generated client.
    /// <summary> The JobRouter service client. </summary>
    public partial class JobRouterClient
    {
#pragma warning disable CS1998 // Async method lacks 'await' operators and will run synchronously
        public virtual async Task<Response<RouterJob>> UpsertJobAsync(RouterJob job, CancellationToken cancellationToken = default)
#pragma warning restore CS1998 // Async method lacks 'await' operators and will run synchronously
        {
            if (job is not IModelJsonSerializable<RouterJob> serializable)
            {
                throw new InvalidCastException("model is not serializable");
            }

            using Stream stream = new MemoryStream();
            using (Utf8JsonWriter writer = new(stream))
            {
                serializable.Serialize(writer, new ModelSerializerOptions("P"));
            }

            stream.Position = 0;
            RequestContent content = RequestContent.Create(stream);

            // TODO: was there a good way to get RequestContext without creating it new?
            RequestContext context = new() { CancellationToken = cancellationToken };

            Response response = await UpsertJobAsync(job.Id, content, context).ConfigureAwait(false);

            return Response.FromValue((RouterJob)response, response);
        }

        public virtual Response<RouterJob> UpsertJob(RouterJob job, CancellationToken cancellationToken = default)
        {
            throw new NotImplementedException();
        }

#pragma warning disable CS1998 // Async method lacks 'await' operators and will run synchronously

        public virtual async Task<Response<RouterJob>> GetJobAsync(string id, CancellationToken cancellationToken = default)
#pragma warning restore CS1998 // Async method lacks 'await' operators and will run synchronously
        {
            throw new NotImplementedException();
        }

        public virtual Response<RouterJob> GetJob(string id, CancellationToken cancellationToken = default)
        {
            throw new NotImplementedException();
        }
    }
#pragma warning restore CS1591 // Missing XML comment for publicly visible type or member
}
