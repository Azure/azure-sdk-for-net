trigger: none

extends:
  template: ../../eng/pipelines/templates/stages/archetype-sdk-tests.yml
  parameters:
    ServiceDirectory: storage
    BuildInParallel: true
    TimeoutInMinutes: 180
    CloudConfig:
      Preview:
        SubscriptionConfiguration: $(sub-config-azure-cloud-test-resources-preview-test)
        Location: 'canadacentral'
      UsGov:
        SubscriptionConfiguration: $(sub-config-gov-test-resources-test)
      China:
        SubscriptionConfiguration: $(sub-config-cn-test-resources-test)
      PrivatePreview:
        SubscriptionConfiguration: $(sub-config-storage-test-resources)
    Clouds: 'Preview,UsGov,China'
    SupportedClouds: Preview, PrivatePreview
    TestSetupSteps:
    - template: /sdk/storage/tests-install-azurite.yml
    EnvVars:
      AZURE_ONLY_TEST_LATEST_SERVICE_VERSION: true
