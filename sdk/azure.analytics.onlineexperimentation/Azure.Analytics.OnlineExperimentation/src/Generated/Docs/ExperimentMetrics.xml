<?xml version="1.0" encoding="utf-8"?>
<doc>
  <members>
    <member name="GetExperimentMetricAsync(string,RequestConditions,CancellationToken)">
      <example>
This sample shows how to call GetExperimentMetricAsync.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

Response<ExperimentMetric> response = await client.GetExperimentMetricAsync("events_purchase_creditcard");
]]></code></example>
    </member>
    <member name="GetExperimentMetric(string,RequestConditions,CancellationToken)">
      <example>
This sample shows how to call GetExperimentMetric.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

Response<ExperimentMetric> response = client.GetExperimentMetric("events_purchase_creditcard");
]]></code></example>
    </member>
    <member name="GetExperimentMetricAsync(string,RequestConditions,RequestContext)">
      <example>
This sample shows how to call GetExperimentMetricAsync and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

Response response = await client.GetExperimentMetricAsync("events_purchase_creditcard", null, null);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code></example>
    </member>
    <member name="GetExperimentMetric(string,RequestConditions,RequestContext)">
      <example>
This sample shows how to call GetExperimentMetric and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

Response response = client.GetExperimentMetric("events_purchase_creditcard", null, null);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code></example>
    </member>
    <member name="CreateOrUpdateAsync(string,RequestContent,RequestConditions,RequestContext)">
      <example>
This sample shows how to call CreateOrUpdateAsync and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Average revenue per purchase [USD]",
    description = "The average revenue per purchase transaction in USD. Refund transactions are excluded from this metric. The total revenue might increase while this metric decreases if the number of purchases increases.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization"
    },
    desiredDirection = "Increase",
    definition = new
    {
        type = "Average",
        value = new
        {
            eventName = "Transaction",
            eventProperty = "Revenue",
            filter = "Revenue > 0",
        },
    },
});
Response response = await client.CreateOrUpdateAsync("avg_purchase_revenue", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code>
This sample shows how to call CreateOrUpdateAsync and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Number of purchases (credit card)",
    description = "The number of purchase transactions made with credit card. Refund transactions are excluded from this metric.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization"
    },
    desiredDirection = "Increase",
    definition = new Dictionary<string, object>
    {
        ["type"] = "EventCount",
        ["event"] = new
        {
            eventName = "Transaction",
            filter = "Revenue > 0 and ['payment.method'] == 'credit_card'",
        }
    },
});
Response response = await client.CreateOrUpdateAsync("events_purchase_creditcard", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code>
This sample shows how to call CreateOrUpdateAsync and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Refund rate",
    description = "The percentage of transactions that are refunds. This metric is calculated as the number of refund transactions divided by the total number of transactions.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization"
    },
    desiredDirection = "Neutral",
    definition = new Dictionary<string, object>
    {
        ["type"] = "EventRate",
        ["event"] = new
        {
            eventName = "Transaction",
        },
        ["rateCondition"] = "Revenue < 0"
    },
});
Response response = await client.CreateOrUpdateAsync("rate_refund", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code>
This sample shows how to call CreateOrUpdateAsync and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "95th percentile of page load time [ms]",
    description = "The 95th percentile of the page load time for all pages. Measured in milliseconds. Review page-specific metric results to identify pages that need optimization.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Performance",
        "Important"
    },
    desiredDirection = "Decrease",
    definition = new
    {
        type = "Percentile",
        value = new
        {
            eventName = "PageLoad",
            eventProperty = "LoadTime_ms",
        },
        percentile = 95,
    },
});
Response response = await client.CreateOrUpdateAsync("p95_page_load_time", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code>
This sample shows how to call CreateOrUpdateAsync and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Total revenue [USD]",
    description = "The total revenue in USD. Refund transactions contribute negatively to this metric.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization",
        "Important"
    },
    desiredDirection = "Increase",
    definition = new
    {
        type = "Sum",
        value = new
        {
            eventName = "Transaction",
            eventProperty = "Revenue",
        },
    },
});
Response response = await client.CreateOrUpdateAsync("sum_revenue", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code>
This sample shows how to call CreateOrUpdateAsync and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Users with purchase",
    description = "The number of users who have made at least one purchase transaction. Refund transactions are excluded from this metric. As the analysis period grows, this metric begins to saturate as users making multiple purchases no longer contribute.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization"
    },
    desiredDirection = "Increase",
    definition = new Dictionary<string, object>
    {
        ["type"] = "UserCount",
        ["event"] = new
        {
            eventName = "Transaction",
            filter = "Revenue > 0",
        }
    },
});
Response response = await client.CreateOrUpdateAsync("users_purchase", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code>
This sample shows how to call CreateOrUpdateAsync and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Subscription ad conversion rate",
    description = "The percentage of users who saw an advertisement for a subscription promotion and then later successfully subscribed. This metric is calculated as the number of users who successfully subscribed after seeing the advert divided by the total number of users who saw the advert. Users who saw multiple adverts or subscribed multiple times are counted only once. Users who saw the advert before the analysis period starts are excluded from this metric.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization"
    },
    desiredDirection = "Increase",
    definition = new
    {
        type = "UserRate",
        startEvent = new
        {
            eventName = "AdView",
            filter = "Source == 'subscription_promo'",
        },
        endEvent = new
        {
            eventName = "Subscribe",
            filter = "Status == 'Success'",
        },
    },
});
Response response = await client.CreateOrUpdateAsync("rate_subscription_ad", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code></example>
    </member>
    <member name="CreateOrUpdate(string,RequestContent,RequestConditions,RequestContext)">
      <example>
This sample shows how to call CreateOrUpdate and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Average revenue per purchase [USD]",
    description = "The average revenue per purchase transaction in USD. Refund transactions are excluded from this metric. The total revenue might increase while this metric decreases if the number of purchases increases.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization"
    },
    desiredDirection = "Increase",
    definition = new
    {
        type = "Average",
        value = new
        {
            eventName = "Transaction",
            eventProperty = "Revenue",
            filter = "Revenue > 0",
        },
    },
});
Response response = client.CreateOrUpdate("avg_purchase_revenue", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code>
This sample shows how to call CreateOrUpdate and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Number of purchases (credit card)",
    description = "The number of purchase transactions made with credit card. Refund transactions are excluded from this metric.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization"
    },
    desiredDirection = "Increase",
    definition = new Dictionary<string, object>
    {
        ["type"] = "EventCount",
        ["event"] = new
        {
            eventName = "Transaction",
            filter = "Revenue > 0 and ['payment.method'] == 'credit_card'",
        }
    },
});
Response response = client.CreateOrUpdate("events_purchase_creditcard", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code>
This sample shows how to call CreateOrUpdate and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Refund rate",
    description = "The percentage of transactions that are refunds. This metric is calculated as the number of refund transactions divided by the total number of transactions.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization"
    },
    desiredDirection = "Neutral",
    definition = new Dictionary<string, object>
    {
        ["type"] = "EventRate",
        ["event"] = new
        {
            eventName = "Transaction",
        },
        ["rateCondition"] = "Revenue < 0"
    },
});
Response response = client.CreateOrUpdate("rate_refund", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code>
This sample shows how to call CreateOrUpdate and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "95th percentile of page load time [ms]",
    description = "The 95th percentile of the page load time for all pages. Measured in milliseconds. Review page-specific metric results to identify pages that need optimization.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Performance",
        "Important"
    },
    desiredDirection = "Decrease",
    definition = new
    {
        type = "Percentile",
        value = new
        {
            eventName = "PageLoad",
            eventProperty = "LoadTime_ms",
        },
        percentile = 95,
    },
});
Response response = client.CreateOrUpdate("p95_page_load_time", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code>
This sample shows how to call CreateOrUpdate and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Total revenue [USD]",
    description = "The total revenue in USD. Refund transactions contribute negatively to this metric.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization",
        "Important"
    },
    desiredDirection = "Increase",
    definition = new
    {
        type = "Sum",
        value = new
        {
            eventName = "Transaction",
            eventProperty = "Revenue",
        },
    },
});
Response response = client.CreateOrUpdate("sum_revenue", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code>
This sample shows how to call CreateOrUpdate and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Users with purchase",
    description = "The number of users who have made at least one purchase transaction. Refund transactions are excluded from this metric. As the analysis period grows, this metric begins to saturate as users making multiple purchases no longer contribute.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization"
    },
    desiredDirection = "Increase",
    definition = new Dictionary<string, object>
    {
        ["type"] = "UserCount",
        ["event"] = new
        {
            eventName = "Transaction",
            filter = "Revenue > 0",
        }
    },
});
Response response = client.CreateOrUpdate("users_purchase", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code>
This sample shows how to call CreateOrUpdate and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Subscription ad conversion rate",
    description = "The percentage of users who saw an advertisement for a subscription promotion and then later successfully subscribed. This metric is calculated as the number of users who successfully subscribed after seeing the advert divided by the total number of users who saw the advert. Users who saw multiple adverts or subscribed multiple times are counted only once. Users who saw the advert before the analysis period starts are excluded from this metric.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization"
    },
    desiredDirection = "Increase",
    definition = new
    {
        type = "UserRate",
        startEvent = new
        {
            eventName = "AdView",
            filter = "Source == 'subscription_promo'",
        },
        endEvent = new
        {
            eventName = "Subscribe",
            filter = "Status == 'Success'",
        },
    },
});
Response response = client.CreateOrUpdate("rate_subscription_ad", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("id").ToString());
Console.WriteLine(result.GetProperty("lifecycle").ToString());
Console.WriteLine(result.GetProperty("displayName").ToString());
Console.WriteLine(result.GetProperty("description").ToString());
Console.WriteLine(result.GetProperty("categories")[0].ToString());
Console.WriteLine(result.GetProperty("desiredDirection").ToString());
Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
Console.WriteLine(result.GetProperty("eTag").ToString());
Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
]]></code></example>
    </member>
    <member name="ValidateAsync(string,ExperimentMetric,CancellationToken)">
      <example>
This sample shows how to call ValidateAsync.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

ExperimentMetric body = new ExperimentMetric(
LifecycleStage.Active,
"Average revenue per purchase [USD]",
"The average revenue per purchase transaction in USD. Refund transactions are excluded from this metric. The total revenue might increase while this metric decreases if the number of purchases increases.",
new string[] { "Monetization" },
DesiredDirection.Increase,
new AverageDefinition(new AggregatedValue("Transaction", "Revenue")
{
    Filter = "Revenue >",
}));
Response<ExperimentMetricValidateResult> response = await client.ValidateAsync("events_purchase_creditcard", body);
]]></code></example>
    </member>
    <member name="Validate(string,ExperimentMetric,CancellationToken)">
      <example>
This sample shows how to call Validate.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

ExperimentMetric body = new ExperimentMetric(
LifecycleStage.Active,
"Average revenue per purchase [USD]",
"The average revenue per purchase transaction in USD. Refund transactions are excluded from this metric. The total revenue might increase while this metric decreases if the number of purchases increases.",
new string[] { "Monetization" },
DesiredDirection.Increase,
new AverageDefinition(new AggregatedValue("Transaction", "Revenue")
{
    Filter = "Revenue >",
}));
Response<ExperimentMetricValidateResult> response = client.Validate("events_purchase_creditcard", body);
]]></code></example>
    </member>
    <member name="ValidateAsync(string,RequestContent,RequestContext)">
      <example>
This sample shows how to call ValidateAsync and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Average revenue per purchase [USD]",
    description = "The average revenue per purchase transaction in USD. Refund transactions are excluded from this metric. The total revenue might increase while this metric decreases if the number of purchases increases.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization"
    },
    desiredDirection = "Increase",
    definition = new
    {
        type = "Average",
        value = new
        {
            eventName = "Transaction",
            eventProperty = "Revenue",
            filter = "Revenue >",
        },
    },
});
Response response = await client.ValidateAsync("events_purchase_creditcard", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("diagnostics")[0].GetProperty("message").ToString());
Console.WriteLine(result.GetProperty("diagnostics")[0].GetProperty("code").ToString());
Console.WriteLine(result.GetProperty("result").ToString());
]]></code></example>
    </member>
    <member name="Validate(string,RequestContent,RequestContext)">
      <example>
This sample shows how to call Validate and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

using RequestContent content = RequestContent.Create(new
{
    displayName = "Average revenue per purchase [USD]",
    description = "The average revenue per purchase transaction in USD. Refund transactions are excluded from this metric. The total revenue might increase while this metric decreases if the number of purchases increases.",
    lifecycle = "Active",
    categories = new object[]
    {
        "Monetization"
    },
    desiredDirection = "Increase",
    definition = new
    {
        type = "Average",
        value = new
        {
            eventName = "Transaction",
            eventProperty = "Revenue",
            filter = "Revenue >",
        },
    },
});
Response response = client.Validate("events_purchase_creditcard", content);

JsonElement result = JsonDocument.Parse(response.ContentStream).RootElement;
Console.WriteLine(result.GetProperty("diagnostics")[0].GetProperty("message").ToString());
Console.WriteLine(result.GetProperty("diagnostics")[0].GetProperty("code").ToString());
Console.WriteLine(result.GetProperty("result").ToString());
]]></code></example>
    </member>
    <member name="DeleteAsync(string,RequestConditions,RequestContext)">
      <example>
This sample shows how to call DeleteAsync.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

Response response = await client.DeleteAsync("avg_purchase_revenue");

Console.WriteLine(response.Status);
]]></code></example>
    </member>
    <member name="Delete(string,RequestConditions,RequestContext)">
      <example>
This sample shows how to call Delete.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

Response response = client.Delete("avg_purchase_revenue");

Console.WriteLine(response.Status);
]]></code></example>
    </member>
    <member name="GetExperimentMetricsAsync(CancellationToken)">
      <example>
This sample shows how to call GetExperimentMetricsAsync.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

await foreach (ExperimentMetric item in client.GetExperimentMetricsAsync())
{
}
]]></code></example>
    </member>
    <member name="GetExperimentMetrics(CancellationToken)">
      <example>
This sample shows how to call GetExperimentMetrics.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

foreach (ExperimentMetric item in client.GetExperimentMetrics())
{
}
]]></code></example>
    </member>
    <member name="GetExperimentMetricsAsync(RequestContext)">
      <example>
This sample shows how to call GetExperimentMetricsAsync and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

await foreach (BinaryData item in client.GetExperimentMetricsAsync(null))
{
    JsonElement result = JsonDocument.Parse(item.ToStream()).RootElement;
    Console.WriteLine(result.GetProperty("id").ToString());
    Console.WriteLine(result.GetProperty("lifecycle").ToString());
    Console.WriteLine(result.GetProperty("displayName").ToString());
    Console.WriteLine(result.GetProperty("description").ToString());
    Console.WriteLine(result.GetProperty("categories")[0].ToString());
    Console.WriteLine(result.GetProperty("desiredDirection").ToString());
    Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
    Console.WriteLine(result.GetProperty("eTag").ToString());
    Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
}
]]></code></example>
    </member>
    <member name="GetExperimentMetrics(RequestContext)">
      <example>
This sample shows how to call GetExperimentMetrics and parse the result.
<code><![CDATA[
Uri endpoint = new Uri("<endpoint>");
TokenCredential credential = new DefaultAzureCredential();
ExperimentMetrics client = new OnlineExperimentationClient(endpoint, credential).GetExperimentMetricsClient(apiVersion: "2025-05-31-preview");

foreach (BinaryData item in client.GetExperimentMetrics(null))
{
    JsonElement result = JsonDocument.Parse(item.ToStream()).RootElement;
    Console.WriteLine(result.GetProperty("id").ToString());
    Console.WriteLine(result.GetProperty("lifecycle").ToString());
    Console.WriteLine(result.GetProperty("displayName").ToString());
    Console.WriteLine(result.GetProperty("description").ToString());
    Console.WriteLine(result.GetProperty("categories")[0].ToString());
    Console.WriteLine(result.GetProperty("desiredDirection").ToString());
    Console.WriteLine(result.GetProperty("definition").GetProperty("type").ToString());
    Console.WriteLine(result.GetProperty("eTag").ToString());
    Console.WriteLine(result.GetProperty("lastModifiedAt").ToString());
}
]]></code></example>
    </member>
  </members>
</doc>