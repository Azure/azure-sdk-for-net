SIGNEDURLUTILITIES:

Signed URLs is a CDN feature. When enabled, requests are verified CDN edge server before the CDN delivers the content that they are generated by a trusted site by requiring requests to contain a signature value that holds encoded information about the requester.

The customers will need to generate this signature and provide it to the clients which can be used in the requests as part of query strings, cookies or headers.

This is .Net Console App which the customers can use to generate signature for Signed Urls.

The algorithm used in this sample to generate signature:
StringToHash = ResourcePath + 
               "?" +
               expiresParamName + 
               "=" +
               expiresValue +
               "&" +
               keyIdParamName +
               "=" +
               keyIdValue

// ConvertToUrlSafeBase64String  will replace + with - and / with _. 
ComputedHash = ConvertToUrlSafeBase64String((new HMACSHA256(Encoding.ASCII.GetBytes(secret))).ComputeHash(Encoding.UTF8.GetBytes(StringToHash)));

How to use?
Provide the parameters used to compute the signature in the below order:

./SignatureComputationApp <ResourcePath> <ExpiresParamName> <ExpiresParamValue> <KeyIdParamName> <KeyIdParamValue> <Secret>

The computed signature is written to the console.

For example:
./SignatureComputationApp /urlsigning/test expires 2145916800 keyid key1 123456789012345678901234567890123
iTsrLX9rVAIJkSahBA_j5o9Azf5-j331ohxDR1Gx2js=

Example Signed request with signnature as part of query string paramters: https://contoso.azureedge.net/urlsigning/test?expires=2145916800&keyid:key1&signature=iTsrLX9rVAIJkSahBA_j5o9Azf5-j331ohxDR1Gx2js=


