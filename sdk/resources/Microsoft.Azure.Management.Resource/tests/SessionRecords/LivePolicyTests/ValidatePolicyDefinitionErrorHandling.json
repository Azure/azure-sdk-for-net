{
  "Entries": [
    {
      "RequestUri": "/subscriptions/45076d1d-a3e0-418b-8187-e1422a8cf5f4/providers/Microsoft.Authorization/policyDefinitions/azsmnet3797?api-version=2020-09-01",
      "EncodedRequestUri": "L3N1YnNjcmlwdGlvbnMvNDUwNzZkMWQtYTNlMC00MThiLTgxODctZTE0MjJhOGNmNWY0L3Byb3ZpZGVycy9NaWNyb3NvZnQuQXV0aG9yaXphdGlvbi9wb2xpY3lEZWZpbml0aW9ucy9henNtbmV0Mzc5Nz9hcGktdmVyc2lvbj0yMDIwLTA5LTAx",
      "RequestMethod": "PUT",
      "RequestBody": "{\r\n  \"properties\": {\r\n    \"displayName\": \"ValidatePolicyDefinitionErrorHandling - Missing Rule [Auto Test]\"\r\n  }\r\n}",
      "RequestHeaders": {
        "x-ms-client-request-id": [
          "4cbe7a69-d04f-4b81-9723-b68f94543514"
        ],
        "Accept-Language": [
          "en-US"
        ],
        "User-Agent": [
          "FxVersion/4.6.29916.01",
          "OSName/Windows",
          "OSVersion/Microsoft.Windows.10.0.19043.",
          "Microsoft.Azure.Management.ResourceManager.PolicyClient/3.13.2.0"
        ],
        "Content-Type": [
          "application/json; charset=utf-8"
        ],
        "Content-Length": [
          "115"
        ]
      },
      "ResponseHeaders": {
        "Cache-Control": [
          "no-store, no-cache"
        ],
        "Pragma": [
          "no-cache"
        ],
        "x-ms-ratelimit-remaining-subscription-writes": [
          "1199"
        ],
        "Server": [
          "Kestrel"
        ],
        "x-ms-request-id": [
          "7c1545e8-7e38-44a7-8344-558f8d6b2f72"
        ],
        "x-ms-correlation-request-id": [
          "7c1545e8-7e38-44a7-8344-558f8d6b2f72"
        ],
        "x-ms-routing-request-id": [
          "SOUTHCENTRALUS:20210511T203658Z:7c1545e8-7e38-44a7-8344-558f8d6b2f72"
        ],
        "Strict-Transport-Security": [
          "max-age=31536000; includeSubDomains"
        ],
        "X-Content-Type-Options": [
          "nosniff"
        ],
        "Date": [
          "Tue, 11 May 2021 20:36:57 GMT"
        ],
        "Content-Length": [
          "209"
        ],
        "Content-Type": [
          "application/json"
        ],
        "Expires": [
          "-1"
        ]
      },
      "ResponseBody": "{\r\n  \"error\": {\r\n    \"code\": \"InvalidRequestContent\",\r\n    \"message\": \"The request content was invalid and could not be deserialized: 'Required property 'policyRule' not found in JSON. Path 'properties', line 4, position 3.'.\"\r\n  }\r\n}",
      "StatusCode": 400
    },
    {
      "RequestUri": "/subscriptions/45076d1d-a3e0-418b-8187-e1422a8cf5f4/providers/Microsoft.Authorization/policyDefinitions/azsmnet3797?api-version=2020-09-01",
      "EncodedRequestUri": "L3N1YnNjcmlwdGlvbnMvNDUwNzZkMWQtYTNlMC00MThiLTgxODctZTE0MjJhOGNmNWY0L3Byb3ZpZGVycy9NaWNyb3NvZnQuQXV0aG9yaXphdGlvbi9wb2xpY3lEZWZpbml0aW9ucy9henNtbmV0Mzc5Nz9hcGktdmVyc2lvbj0yMDIwLTA5LTAx",
      "RequestMethod": "PUT",
      "RequestBody": "{\r\n  \"properties\": {\r\n    \"mode\": \"Foo\",\r\n    \"displayName\": \"ValidatePolicyDefinitionErrorHandling - Bad Mode $[Auto Test]\",\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"source\": \"action\",\r\n        \"equals\": \"ResourceProviderTestHost/TestResourceType/TestResourceTypeNestedOne/write\"\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"deny\"\r\n      }\r\n    }\r\n  }\r\n}",
      "RequestHeaders": {
        "x-ms-client-request-id": [
          "ccfad92b-3ef5-4b41-adca-043dc6cdbf36"
        ],
        "Accept-Language": [
          "en-US"
        ],
        "User-Agent": [
          "FxVersion/4.6.29916.01",
          "OSName/Windows",
          "OSVersion/Microsoft.Windows.10.0.19043.",
          "Microsoft.Azure.Management.ResourceManager.PolicyClient/3.13.2.0"
        ],
        "Content-Type": [
          "application/json; charset=utf-8"
        ],
        "Content-Length": [
          "362"
        ]
      },
      "ResponseHeaders": {
        "Cache-Control": [
          "no-store, no-cache"
        ],
        "Pragma": [
          "no-cache"
        ],
        "x-ms-ratelimit-remaining-subscription-writes": [
          "1198"
        ],
        "Server": [
          "Kestrel"
        ],
        "x-ms-request-id": [
          "37ea4227-2701-4ef2-bfdd-82d0af225545"
        ],
        "x-ms-correlation-request-id": [
          "37ea4227-2701-4ef2-bfdd-82d0af225545"
        ],
        "x-ms-routing-request-id": [
          "SOUTHCENTRALUS:20210511T203658Z:37ea4227-2701-4ef2-bfdd-82d0af225545"
        ],
        "Strict-Transport-Security": [
          "max-age=31536000; includeSubDomains"
        ],
        "X-Content-Type-Options": [
          "nosniff"
        ],
        "Date": [
          "Tue, 11 May 2021 20:36:57 GMT"
        ],
        "Content-Length": [
          "399"
        ],
        "Content-Type": [
          "application/json"
        ],
        "Expires": [
          "-1"
        ]
      },
      "ResponseBody": "{\r\n  \"error\": {\r\n    \"code\": \"InvalidPolicyDefinitionMode\",\r\n    \"message\": \"The policy mode 'Foo' is invalid for policy with id 'azsmnet3797'. The allowed values are 'All, Indexed, Microsoft.ContainerService.Data, Microsoft.CustomerLockbox.Data, Microsoft.DataCatalog.Data, Microsoft.KeyVault.Data, Microsoft.Kubernetes.Data, Microsoft.MachineLearningServices.Data, Microsoft.Network.Data, Microsoft.Synapse.Data'.\"\r\n  }\r\n}",
      "StatusCode": 400
    },
    {
      "RequestUri": "/subscriptions/45076d1d-a3e0-418b-8187-e1422a8cf5f4/providers/Microsoft.Authorization/policyDefinitions/azsmnet3797?api-version=2020-09-01",
      "EncodedRequestUri": "L3N1YnNjcmlwdGlvbnMvNDUwNzZkMWQtYTNlMC00MThiLTgxODctZTE0MjJhOGNmNWY0L3Byb3ZpZGVycy9NaWNyb3NvZnQuQXV0aG9yaXphdGlvbi9wb2xpY3lEZWZpbml0aW9ucy9henNtbmV0Mzc5Nz9hcGktdmVyc2lvbj0yMDIwLTA5LTAx",
      "RequestMethod": "PUT",
      "RequestBody": "{\r\n  \"properties\": {\r\n    \"displayName\": \"ValidatePolicyDefinitionErrorHandling - Unused Parameter $[Auto Test]\",\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"source\": \"action\",\r\n        \"equals\": \"ResourceProviderTestHost/TestResourceType/TestResourceTypeNestedOne/write\"\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"deny\"\r\n      }\r\n    },\r\n    \"parameters\": {\r\n      \"foo\": {\r\n        \"type\": \"String\"\r\n      }\r\n    }\r\n  }\r\n}",
      "RequestHeaders": {
        "x-ms-client-request-id": [
          "54206d34-c7ed-419d-9bec-499ed697ae0d"
        ],
        "Accept-Language": [
          "en-US"
        ],
        "User-Agent": [
          "FxVersion/4.6.29916.01",
          "OSName/Windows",
          "OSVersion/Microsoft.Windows.10.0.19043.",
          "Microsoft.Azure.Management.ResourceManager.PolicyClient/3.13.2.0"
        ],
        "Content-Type": [
          "application/json; charset=utf-8"
        ],
        "Content-Length": [
          "430"
        ]
      },
      "ResponseHeaders": {
        "Cache-Control": [
          "no-store, no-cache"
        ],
        "Pragma": [
          "no-cache"
        ],
        "x-ms-ratelimit-remaining-subscription-writes": [
          "1197"
        ],
        "Server": [
          "Kestrel"
        ],
        "x-ms-request-id": [
          "1a71279c-dd33-4fc9-b18e-0a258c0ada03"
        ],
        "x-ms-correlation-request-id": [
          "1a71279c-dd33-4fc9-b18e-0a258c0ada03"
        ],
        "x-ms-routing-request-id": [
          "SOUTHCENTRALUS:20210511T203658Z:1a71279c-dd33-4fc9-b18e-0a258c0ada03"
        ],
        "Strict-Transport-Security": [
          "max-age=31536000; includeSubDomains"
        ],
        "X-Content-Type-Options": [
          "nosniff"
        ],
        "Date": [
          "Tue, 11 May 2021 20:36:57 GMT"
        ],
        "Content-Length": [
          "255"
        ],
        "Content-Type": [
          "application/json"
        ],
        "Expires": [
          "-1"
        ]
      },
      "ResponseBody": "{\r\n  \"error\": {\r\n    \"code\": \"UnusedPolicyParameters\",\r\n    \"message\": \"The policy 'azsmnet3797' has defined parameters 'foo' which are not used in the policy rule. Please either remove these parameters from the definition or ensure that they are used in the policy rule.\"\r\n  }\r\n}",
      "StatusCode": 400
    },
    {
      "RequestUri": "/subscriptions/45076d1d-a3e0-418b-8187-e1422a8cf5f4/providers/Microsoft.Authorization/policyDefinitions/azsmnet3797?api-version=2020-09-01",
      "EncodedRequestUri": "L3N1YnNjcmlwdGlvbnMvNDUwNzZkMWQtYTNlMC00MThiLTgxODctZTE0MjJhOGNmNWY0L3Byb3ZpZGVycy9NaWNyb3NvZnQuQXV0aG9yaXphdGlvbi9wb2xpY3lEZWZpbml0aW9ucy9henNtbmV0Mzc5Nz9hcGktdmVyc2lvbj0yMDIwLTA5LTAx",
      "RequestMethod": "PUT",
      "RequestBody": "{\r\n  \"properties\": {\r\n    \"displayName\": \"ValidatePolicyDefinitionErrorHandling - Missing Parameter $[Auto Test]\",\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"source\": \"action\",\r\n        \"equals\": \"[parameters('foo')]\"\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"deny\"\r\n      }\r\n    }\r\n  }\r\n}",
      "RequestHeaders": {
        "x-ms-client-request-id": [
          "74e00860-6116-4eed-b21e-cb08099714ed"
        ],
        "Accept-Language": [
          "en-US"
        ],
        "User-Agent": [
          "FxVersion/4.6.29916.01",
          "OSName/Windows",
          "OSVersion/Microsoft.Windows.10.0.19043.",
          "Microsoft.Azure.Management.ResourceManager.PolicyClient/3.13.2.0"
        ],
        "Content-Type": [
          "application/json; charset=utf-8"
        ],
        "Content-Length": [
          "297"
        ]
      },
      "ResponseHeaders": {
        "Cache-Control": [
          "no-store, no-cache"
        ],
        "Pragma": [
          "no-cache"
        ],
        "x-ms-ratelimit-remaining-subscription-writes": [
          "1196"
        ],
        "Server": [
          "Kestrel"
        ],
        "x-ms-request-id": [
          "48821a24-48d0-4873-8963-4e0b3694d3cf"
        ],
        "x-ms-correlation-request-id": [
          "48821a24-48d0-4873-8963-4e0b3694d3cf"
        ],
        "x-ms-routing-request-id": [
          "SOUTHCENTRALUS:20210511T203658Z:48821a24-48d0-4873-8963-4e0b3694d3cf"
        ],
        "Strict-Transport-Security": [
          "max-age=31536000; includeSubDomains"
        ],
        "X-Content-Type-Options": [
          "nosniff"
        ],
        "Date": [
          "Tue, 11 May 2021 20:36:57 GMT"
        ],
        "Content-Length": [
          "431"
        ],
        "Content-Type": [
          "application/json"
        ],
        "Expires": [
          "-1"
        ]
      },
      "ResponseBody": "{\r\n  \"error\": {\r\n    \"code\": \"InvalidPolicyParameters\",\r\n    \"message\": \"A function or parameter in policy 'azsmnet3797' could not be validated. If using template functions, try following the tips in: https://aka.ms/policy-avoiding-template-failures. The inner exception 'The policy 'azsmnet3797' has undefined parameter 'foo' which is used in the policy rule. Please either define it in policy definition or remove the reference in policy rule.'.\"\r\n  }\r\n}",
      "StatusCode": 400
    }
  ],
  "Names": {
    "ValidatePolicyDefinitionErrorHandling": [
      "azsmnet3797"
    ]
  },
  "Variables": {
    "SubscriptionId": "45076d1d-a3e0-418b-8187-e1422a8cf5f4"
  }
}